<!doctype html><html lang=es><head><meta charset=utf-8><title>La base de la integración continua: los micro-commits | Exeal</title><meta name=description content="Los micro-commits son un pre-requisito para practicar trunk-based development, continuous integration y continuous delivery, y por tanto para incrementar la frecuencia de entrega de valor"><meta name=author content="Exeal"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="La base de la integración continua: los micro-commits"><meta property="og:description" content="Los micro-commits son un pre-requisito para practicar trunk-based development, continuous integration y continuous delivery, y por tanto para incrementar la frecuencia de entrega de valor"><meta property="og:type" content="article"><meta property="og:url" content="https://www.exeal.com/blog/2023/12/la-base-de-la-integracion-continua-los-micro-commits/"><meta property="og:image" content="https://www.exeal.com/assets/img/blog/posts/videogame.webp"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-12-15T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-15T00:00:00+00:00"><meta itemprop=name content="La base de la integración continua: los micro-commits"><meta itemprop=description content="Los micro-commits son un pre-requisito para practicar trunk-based development, continuous integration y continuous delivery, y por tanto para incrementar la frecuencia de entrega de valor"><meta itemprop=datePublished content="2023-12-15T00:00:00+00:00"><meta itemprop=dateModified content="2023-12-15T00:00:00+00:00"><meta itemprop=wordCount content="932"><meta itemprop=image content="https://www.exeal.com/assets/img/blog/posts/videogame.webp"><meta itemprop=keywords content="ci-cd,buenas-practicas,tdd,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.exeal.com/assets/img/blog/posts/videogame.webp"><meta name=twitter:title content="La base de la integración continua: los micro-commits"><meta name=twitter:description content="Los micro-commits son un pre-requisito para practicar trunk-based development, continuous integration y continuous delivery, y por tanto para incrementar la frecuencia de entrega de valor"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous><link rel=stylesheet href=https://www.exeal.com/scss/main.css><link rel=icon type=image/png href=/assets/img/favicon.png><link rel=apple-touch-icon href=/assets/img/apple-touch-icon.png><script async src="https://www.googletagmanager.com/gtag/js?id=UA-172984297-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-172984297-1")</script><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/8231847.js></script>
<link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css><link rel=stylesheet href=https://www.exeal.com/scss/blog.css><link rel=stylesheet href=https://www.exeal.com/scss/hero.css></head><body><nav class="navbar navbar-light navbar-expand-lg navbar-shrink"><div class=container><div class="d-flex flex-row"><a href=/ class=navbar-brand><img src=/assets/img/logo-exeal-header-black.svg alt=Exeal></a>
<a href=/blog/ class=navbar-brand><img src=/assets/img/blog/logo-blog.svg alt=Blog></a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarTogglerDemo01 aria-controls=navbarTogglerDemo01 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarTogglerDemo01><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link nav-button" href=/lista-de-correo/>Suscríbete a la newsletter</a></li></ul></div></div></nav><header class="hero hero-bg-img" style=background-image:url(/assets/img/blog/posts/videogame.webp)><div class="hero-bg-img-mask bg-mask"><div class="container h-100"><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-light"><li><a href=https://www.exeal.com/tags/ci-cd/>#ci-cd</a></li><li><a href=https://www.exeal.com/tags/buenas-practicas/>#buenas-practicas</a></li><li><a href=https://www.exeal.com/tags/tdd/>#tdd</a></li></ul><h1><span class=underline>La base de la integración continua: los micro-commits</span></h1><h2>Pedro Pardal</h2><p class=date>2023/12/15</p><p><a data-scroll=sect-body href=#><img class=arrow-down src=/assets/img/arrow-down-secondary.svg></a></p></div></div></div></div></header><section id=sect-body><div class=container><article><p>Quizá te sorprenda (a mí me sorprendió cuando empecé a <a href=https://www.exeal.com/servicios/technical-coaching/>ayudar a otros equipos como coach</a>), pero la mayoría de desarrolladores commitean código al control de versiones apenas entre 2 o 3 veces por semana.</p><p>Esto les limita la frecuencia con la que pueden entregar código funcionando a producción.</p><p>Cuando nuestro objetivo es incrementar la frecuencia de entrega de valor, y por tanto practicar <em>trunk-based development</em>, <em>continuous integration</em> y <em>continuous delivery</em>, buscamos justo lo contrario: <strong>acelerar la frecuencia con la que commiteamos, tanto como sea posible</strong>.</p><p>Esta práctica, conocida como micro-commits, es junto con el testing automatizado y la automatización de la build, <strong>una de las prácticas de ingeniería fundamentales si queremos lograr una entrega continua</strong>.</p><h2 id=guardar-la-partida>Guardar la partida</h2><p>Tenemos que <strong>ver los commits como si estuviéramos guardando la partida</strong> en un videojuego.</p><p><img src=/assets/img/blog/posts/savegame.jpg alt></p><p>Buscamos <strong>evitar perder cuanto más avance posible</strong>. Que no tenga que volver a respawnear 7 pantallas más atrás y volver a pasarme todas esas pantallas. Es decir, que si me matan, respawnee lo mas cerca posible de donde me han matado. Con los commits, el concepto es el mismo.</p><p>Podemos commitear para cosas tan pequeñas como:</p><ul><li>Formatear un fichero</li><li>Renombrar una variable</li><li>Extraer un método</li><li>Un <strong>pequeño</strong> incremento de funcionalidad</li><li>Añadir un nuevo caso de test</li><li>Añadir una dependencia</li><li>Un cambio de configuración</li><li>etc., etc.</li></ul><p>Una buena heurística es commitear entre 5-20 commits por hora. En general, mientras más, mejor.</p><h2 id=micro-commits-y-tdd-el-bucle-rgr-extendido>Micro-commits y TDD: el bucle RGR extendido</h2><p>Cuando estamos haciendo TDD, hay un momento en el que encaja muy bien hacer un commit: cuando acabamos una iteración del bucle red-green-refactor.</p><p>Cada iteración del bucle de TDD añade un <strong>pequeño incremento de funcionalidad</strong>, que nos deja con los tests pasando: es el momento perfecto para guardar la partida.</p><p>Esta técnica se conoce como <strong>bucle Red-green-refactor extendido</strong>, o bucle red-green-refactor-integrate.</p><p><img src=/assets/img/blog/posts/rgri-loop.png alt></p><p>Incluso podemos <strong>commitear inmediatamente tras llegar a verde</strong>, y luego volver a integrar tantas veces como pasos de refactoring demos (ya que recordemos que refactorizar es realizar una serie de transformaciones pequeñas que preservan el comportamiento del código, es decir, nunca dejamos que los tests se rompan, i.e. volvamos a rojo).</p><p>No es buena práctica integrar inmediatamente tras escribir un test antes de que este pase, ya que si hacemos un commit en rojo <strong>estaremos rompiendo la integración continua</strong>.</p><h2 id=y-si-la-build-tarda-demasiado>¿Y si la build tarda demasiado?</h2><p>Un escenario que nos puede frenar a la hora de integrar con más frecuencia es que los tests tarden demasiado en ejecutarse.</p><p>En este caso, priorizaremos atacar la causa raíz, intentando <strong>reducir la duración de los tests</strong>, en lugar de integrar menos frecuentemente.</p><h2 id=graceful-retreat>Graceful retreat</h2><p>Si integrar con más frecuencia no fuera ya de por sí un motivo de peso suficiente para usar micro-commits, hay otro beneficio muy interesante: la posibilidad de hacer <strong>graceful retreat.</strong></p><p>Cuando rompemos el código a la hora de añadir una funcionalidad o refactorizar (llegamos a rojo), hemos experimentado que es más fácil <strong>hacer un rollback a un estado conocido</strong> (volver a verde) y, a partir de ahí, volver a seguir hacia adelante tomando otro camino, que intentar volver a verde directamente corrigiendo los errores.</p><p>Se trata de una <strong>estrategia mas consistente y predecible</strong>, y además más gratificante a nivel de salud mental. Por ello, nos interesa que el punto al que revirtamos se encuentre lo más cerca posible del momento en que rompimos el código, <strong>para perder el menor trabajo posible</strong>.</p><p>De esta forma, tras revertir los cambios aprovechamos y <strong>analizamos qué es lo que ha ido mal</strong>, y <strong>elaboramos una estrategia de refactoring más adecuada</strong>, que sí que nos lleve por el camino que buscamos.</p><h2 id=conventional-commits>Conventional commits</h2><p>Una técnica que no está directamente relacionada con los micro-commits, pero que ayuda mucho utilizarlas juntas, es el <a href=https://www.conventionalcommits.org/en/v1.0.0/>estándar de conventional commits.</a></p><p>Se trata de una <strong>convención para escribir mensajes de commits</strong>, que plantea una característica que genera sinergia con los micro-commits, y es que <strong>nos obliga a definir el tipo de commit.</strong></p><p>Es decir, en el mensaje del commit además de añadir una descripción sobre el cambio, nos obligamos a acompañarlo de un campo adicional: <strong>el tipo de commit.</strong></p><p>Este tipo puede ser una serie de valores conocidos, entre otros:</p><ul><li><strong>feat:</strong> para nuevas funcionalidades,</li><li><strong>fix:</strong> para correcciones de bugs,</li><li><strong>test:</strong> para nuevos tests (siempre que esté en verde, evitemos commitear en rojo),</li><li><strong>refactor:</strong> para cambios que no alteran el comportamiento del código,</li><li><strong>chore</strong>: para otros cambios que no alteren el código fuente,</li><li><strong>style</strong>: para cambios de estilo o formateo,</li></ul><p>Añadir el tipo a cada commit nos invita a que cada commit tenga una única responsabilidad, que <strong>haga una sola cosa</strong>. Por ejemplo, si en un mismo commit añadimos una funcionalidad nueva y a la vez corregimos bug, ¿qué tipo le pondríamos?</p><p>El hacernos esta pregunta, nos lleva a esta otra: ¿cómo podríamos haber hecho este cambio en dos commits separados, cada uno de ellos de un tipo distinto? Esto nos llevaría a hacer <strong>dos commits mas pequeñitos</strong>, y por tanto en una <strong>integración más continua.</strong></p><h2 id=en-resumen>En resumen</h2><p>Los micro-commits son un pre-requisito para practicar integración continua de verdad, <strong>y una que es normalmente obviada por muchos equipos, pero que es muy fácil de aprender y aplicar</strong>. Si estamos haciendo TDD, practicar micro-commits resulta mucho más natural, al tener momentos bien identificados para integrar el código. Cuando estamos refactorizando, nos ayuda a mantener el código siempre en verde y ser más productivos. Una muy buena forma de empezar a aplicar micro-commits es usar el estándar de conventional commits, para obligarnos a realizar cambios de menor scope.</p><h2 id=recursos-para-seguir-aprendiendo>Recursos para seguir aprendiendo</h2><ul><li><a href=https://www.industriallogic.com/blog/whats-this-about-micro-commits/>What’s this about Micro-commit (Tim Ottinger)</a></li><li><a href=https://medium.com/@kentbeck_7670/test-commit-revert-870bbd756864>test && commit || revert (Kent Beck)</a></li></ul></article></div><div class=container><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-dark"><li><a href=https://www.exeal.com/tags/ci-cd/>#ci-cd</a></li><li><a href=https://www.exeal.com/tags/buenas-practicas/>#buenas-practicas</a></li><li><a href=https://www.exeal.com/tags/tdd/>#tdd</a></li></ul><div class=post-author><img class=rounded-circle src=/assets/img/team/pedropardal.jpg><div class=post-author-name><h2>Pedro Pardal</h2><p>Founder, Software Craftsman & Technical Coach</p><ul class="social-icons list-inline"><li class=list-inline-item><a target=_blank href=https://twitter.com/ppardalj><img src=/assets/img/blog/social-icons/icon-twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.linkedin.com/in/pedro-pardal-jimena-36764344/><img src=/assets/img/blog/social-icons/icon-linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/ppardalj><img src=/assets/img/blog/social-icons/icon-github.svg></a></li><li class=list-inline-item><a target=_blank href=mailto:pedro.pardal@exeal.com><img src=/assets/img/blog/social-icons/icon-email.svg></a></li></ul></div></div><div class=addthis_inline_share_toolbox></div></div></div></div></section><footer class=black><div class=container><div class="row align-items-center"><div class="col-lg-6 text-lg-left"><a href=/><img src=/assets/img/logo-exeal-footer.svg alt=Exeal></a><p><a href=/equipo/>Equipo</a> |
<a href=/jobs/extreme-programming-coach/>Empleo</a> |
<a href=/legal/legal-notice/>Aviso legal</a> |
<a href=/legal/cookie-policy/>Política de cookies</a> |
<a href=/legal/privacy-policy/>Política de privacidad</a></p></div><div class="col-lg-6 social-media"><ul class="list-inline text-lg-right mt-3 mt-lg-0"><li class=list-inline-item><a target=_blank href=https://twitter.com/exeal><img src=/assets/img/social/twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.linkedin.com/company/exeal/><img src=/assets/img/social/linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.youtube.com/channel/UCxVspi-mashFr1RPGxSxEPA><img src=/assets/img/social/youtube.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/exeal-es><img src=/assets/img/social/github.svg></a></li><li class=list-inline-item><a target=_blank href=mailto:hola@exeal.com><img src=/assets/img/social/email.svg></a></li></ul></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script>
<script src=/assets/js/scroll.js></script>
<script src=/assets/js/redirect.js></script>
<script src=/assets/js/console.js></script>
<script>function loadScript(t){var n=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://tracker.metricool.com/resources/be.js",e.onreadystatechange=t,e.onload=t,n.appendChild(e)}loadScript(function(){beTracker.t({hash:"45d30dfb71957d625ad900e4772a2d6a"})})</script><div class="modal fade" id=newsletter-modal tabindex=-1 role=dialog aria-hidden=true><div class="modal-dialog modal-lg modal-dialog-centered" role=document><div class=modal-content><div class=box style=margin:1.5rem;padding:3rem><div class="flap flap-top-right"></div><h2>¿Quieres descubrir las <em>10+1 claves que harán crecer tu carrera como desarrollador</em> en 2024?</h2><p>Déjanos tu nombre y tu mejor email y lo <em>recibirás directamente en tu bandeja de entrada</em>, junto a mucho más <em>contenido de valor</em>.</p><div id=mc_embed_shell><link href=//cdn-images.mailchimp.com/embedcode/classic-061523.css rel=stylesheet type=text/css><div id=mc_embed_signup><form action="https://exeal.us10.list-manage.com/subscribe/post?u=b43f7982f87d38bbb55bc64ae&id=a85eab802a&f_id=008ed9e5f0" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank><div id=mc_embed_signup_scroll><div class=indicates-required><span class=asterisk>*</span> campos requeridos</div><div class=mc-field-group><label for=mce-EMAIL>Tu mejor email <span class=asterisk>*</span></label><input type=email name=EMAIL class="required email" id=mce-EMAIL required></div><div class=mc-field-group><label for=mce-FNAME>Tu nombre <span class=asterisk>*</span></label><input type=text name=FNAME class="required text" id=mce-FNAME required></div><div id=mce-responses class="clear foot"><div class=response id=mce-error-response style=display:none></div><div class=response id=mce-success-response style=display:none></div></div><div aria-hidden=true style=position:absolute;left:-5000px>/* real people should not fill this in and expect good things
- do not remove this or risk form bot signups */
<input type=text name=b_b43f7982f87d38bbb55bc64ae_a85eab802a tabindex=-1></div><div class=optionalParent><div class="clear foot"><input type=submit name=subscribe id=mc-embedded-subscribe class=btn-submit value="Obtener las 10+1 claves"></div></div></div></form></div><script type=text/javascript src=//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js></script>
<script type=text/javascript>(function(){window.fnames=new Array,window.ftypes=new Array,fnames[0]="EMAIL",ftypes[0]="email",fnames[1]="FNAME",ftypes[1]="text",fnames[2]="LNAME",ftypes[2]="text",fnames[5]="JOBTITLE",ftypes[5]="text",fnames[6]="COMPANY",ftypes[6]="text",fnames[3]="ADDRESS",ftypes[3]="address",fnames[4]="PHONE",ftypes[4]="phone"})(jQuery);var $mcj=jQuery.noConflict(!0)</script></div><p><a href=# data-dismiss=modal style=color:grey;font-size:sm>No gracias, prefiero seguir estancado un año más.</a></p></div></div></div></div><script>if(typeof Storage!="undefined"){function showPopup(){window.setTimeout(function(){$("#newsletter-modal").modal("show"),sessionStorage.setItem("popup","hide")},1e4)}sessionStorage.getItem("popup")||sessionStorage.setItem("popup","show"),sessionStorage.getItem("popup")=="show"&&showPopup()}</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f2bf2edad69c454"></script></body></html>
<!doctype html><html lang=es><head><meta charset=utf-8><title>Cómo escribir el primer test usando TDD | Exeal</title><meta name=description content="El primer test es uno de los pasos más importantes cuando desarrollamos TDD"><meta name=author content="Exeal"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="Cómo escribir el primer test usando TDD"><meta property="og:description" content="El primer test es uno de los pasos más importantes cuando desarrollamos TDD"><meta property="og:type" content="article"><meta property="og:url" content="https://www.exeal.com/blog/2023/10/como-escribir-el-primer-test-usando-tdd/"><meta property="og:image" content="https://www.exeal.com/assets/img/blog/posts/birthday-stock.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-10-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-10-25T00:00:00+00:00"><meta itemprop=name content="Cómo escribir el primer test usando TDD"><meta itemprop=description content="El primer test es uno de los pasos más importantes cuando desarrollamos TDD"><meta itemprop=datePublished content="2023-10-25T00:00:00+00:00"><meta itemprop=dateModified content="2023-10-25T00:00:00+00:00"><meta itemprop=wordCount content="617"><meta itemprop=image content="https://www.exeal.com/assets/img/blog/posts/birthday-stock.jpg"><meta itemprop=keywords content="tdd,agile,buenas-practicas,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.exeal.com/assets/img/blog/posts/birthday-stock.jpg"><meta name=twitter:title content="Cómo escribir el primer test usando TDD"><meta name=twitter:description content="El primer test es uno de los pasos más importantes cuando desarrollamos TDD"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous><link rel=stylesheet href=https://www.exeal.com/scss/main.css><link rel=icon type=image/png href=/assets/img/favicon.png><link rel=apple-touch-icon href=/assets/img/apple-touch-icon.png><script async src="https://www.googletagmanager.com/gtag/js?id=UA-172984297-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-172984297-1")</script><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/8231847.js></script>
<link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css><link rel=stylesheet href=https://www.exeal.com/scss/blog.css><link rel=stylesheet href=https://www.exeal.com/scss/hero.css></head><body><nav class="navbar navbar-light navbar-expand-lg navbar-shrink"><div class=container><div class="d-flex flex-row"><a href=/ class=navbar-brand><img src=/assets/img/logo-exeal-header-black.svg alt=Exeal></a>
<a href=/blog/ class=navbar-brand><img src=/assets/img/blog/logo-blog.svg alt=Blog></a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarTogglerDemo01 aria-controls=navbarTogglerDemo01 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarTogglerDemo01><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link nav-button" href=/lista-de-correo/>Suscríbete a la newsletter</a></li></ul></div></div></nav><header class="hero hero-bg-img" style=background-image:url(/assets/img/blog/posts/birthday-stock.jpg)><div class="hero-bg-img-mask bg-mask"><div class="container h-100"><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-light"><li><a href=https://www.exeal.com/tags/tdd/>#tdd</a></li><li><a href=https://www.exeal.com/tags/agile/>#agile</a></li><li><a href=https://www.exeal.com/tags/buenas-practicas/>#buenas-practicas</a></li></ul><h1><span class=underline>Cómo escribir el primer test usando TDD</span></h1><h2>Pedro Pardal</h2><p class=date>2023/10/25</p><p><a data-scroll=sect-body href=#><img class=arrow-down src=/assets/img/arrow-down-secondary.svg></a></p></div></div></div></div></header><section id=sect-body><div class=container><article><p>El primer test es uno de los pasos más importantes cuando desarrollamos TDD. Es el que va a determinar si construimos nuestra solución sobre unos cimientos sólidos o nos vamos a complicar la vida innecesariamente.</p><p>Hay tres cosas principales que yo le pido a mi primer test:</p><ol><li>La primera, que ponga sobre la mesa los elementos más importantes que van a entrar en juego, o las entradas y salidas del sistema (a.k.a. el “given” más sencillo)</li><li>La segunda, que me defina cómo voy a interactuar con el sistema, la fachada del mismo, i.e. cuál es la interfaz pública de mi módulo o clase (a.k.a. el “when” más sencillo”).</li><li>Tercera, que capture el comportamiento del caso más simple que involucre a todos los elementos, o las salidas y entradas más sencillas (a.k.a. el “then” más sencillo).</li></ol><p>Lo que busco con esto es definir las interfaces de todas las piezas que van a entrar en juego, y hacerlas funcionar lo antes posible con un caso muy sencillo, para que luego sea más fácil hacer crecer la solución de forma incremental añadiendo más tests.</p><h2 id=un-ejemplo-felicitaciones-de-cumpleaños>Un ejemplo: felicitaciones de cumpleaños</h2><p>Por ejemplo, imagina que estamos implementando un cronjob diario que scrapea nuestros amigos de Facebook, para mandarles una felicitación el día de su cumpleaños.</p><p>Para escribir nuestro primer test, deberíamos:</p><ol><li><strong>Identificar las entradas y salidas</strong>. En este caso, las entradas serían la lista de amigos de Facebook, cada uno con su nombre y fecha de cumpleaños; la fecha de hoy (para saber quién cumple años hoy), y la salida serían las felicitaciones que toca enviar hoy.</li><li><strong>Determinar cómo vamos a interactuar con el sistema</strong>. Si preferimos un enfoque más funcional, podríamos definir una función <code>run(friends, currentTime): notifications</code>. Si optamos por un enfoque más orientado a tuberías, podemos definir colaboradores que nos proporcionen cada información, p.ej. <code>SystemClock</code>, <code>FacebookFriendScrapper</code> y <code>BirthdayGreetingSender</code>. Inyectaríamos estos colaboradores a nuestro SUT, el <code>GreeterJob</code>, que tendría un único método <code>run()</code> que jugaría con esos colaboradores. Aquí depende del estilo de cada uno.</li><li><strong>Definir el comportamiento más simple</strong>. P.ej., que no haya ningún amigo, me da igual la fecha, no envío ninguna notificación.</li></ol><p>El código del primer test podría ser algo así:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#a6e22e>[Fact]</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> send_no_notifications() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> friends = <span style=color:#66d9ef>new</span> List&lt;Friend&gt;();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> currentTime = fixture.Create&lt;DateTime&gt;();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> greeterJob = <span style=color:#66d9ef>new</span> GreeterJob();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> greetings = greeterJob.Run(friends, currentTime);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  greetings.Should().BeEmpty();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>A partir de aquí <strong>es muy fácil escribir los tests sucesivos</strong>. Simplemente vamos jugando a plantear variantes de las entradas y salidas. ¿Qué pasa cuando tengo más de un amigo? ¿Y si tengo un amigo pero hoy no es su cumpleaños? ¿Y si tengo un amigo y hoy es su cumpleaños? ¿Y si tengo dos amigos pero hoy solo cumple uno de ellos?</p><p>Tampoco quiere decir que la interfaz pública del sistema no evolucione; <strong>siempre podemos refactorizar</strong> si encontramos un diseño que nos convence más. Pero buscar algo funcional desde un primer momento nos da algo a lo que agarrarnos y nos permite avanzar.</p><h2 id=muchas-prácticas-una-filosofía-común>Muchas prácticas, una filosofía común</h2><p>Fíjate como la filosofía es muy similar a cuando hacemos desarrollo de producto a mayor escala. Lo primero que hacemos es un <a href=https://abrahamvallez.medium.com/vertical-slicing-i-desaprende-lo-que-sabes-sobre-user-stories-y-pon-el-foco-en-desarrollo-b859c5827326>Vertical Slicing</a>, para identificar la mínima expresión de cada una de las partes de nuestro sistema. En base a eso, montamos un <a href=https://wiki.c2.com/?WalkingSkeleton>Walking Skeleton</a> de nuestra solución, que contenga todas esas partes en su mínima expresión, pero ya trabajando juntas, para luego ir añadiéndole carne al esqueleto en iteraciones sucesivas.</p><p>Trabajar con la misma filosofía a nivel macro y micro hace que cada fase del desarrollo encaje mejor y el proceso en su conjunto cobre más sentido. Muchas veces, la respuesta a las preguntas de cómo hacer ciertas cosas está en el resto de prácticas que utilizamos a otros niveles.</p></article></div><div class=container><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-dark"><li><a href=https://www.exeal.com/tags/tdd/>#tdd</a></li><li><a href=https://www.exeal.com/tags/agile/>#agile</a></li><li><a href=https://www.exeal.com/tags/buenas-practicas/>#buenas-practicas</a></li></ul><div class=post-author><img class=rounded-circle src=/assets/img/team/pedropardal.jpg><div class=post-author-name><h2>Pedro Pardal</h2><p>Founder, Software Craftsman & Technical Coach</p><ul class="social-icons list-inline"><li class=list-inline-item><a target=_blank href=https://twitter.com/ppardalj><img src=/assets/img/blog/social-icons/icon-twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.linkedin.com/in/pedro-pardal-jimena-36764344/><img src=/assets/img/blog/social-icons/icon-linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/ppardalj><img src=/assets/img/blog/social-icons/icon-github.svg></a></li><li class=list-inline-item><a target=_blank href=mailto:pedro.pardal@exeal.com><img src=/assets/img/blog/social-icons/icon-email.svg></a></li></ul></div></div><div class=addthis_inline_share_toolbox></div></div></div></div></section><footer class=black><div class=container><div class="row align-items-center"><div class="col-lg-6 text-lg-left"><a href=/><img src=/assets/img/logo-exeal-footer.svg alt=Exeal></a><p><a href=/legal/legal-notice/>Aviso legal</a> |
<a href=/legal/cookie-policy/>Política de cookies</a> |
<a href=/legal/privacy-policy/>Política de privacidad</a></p></div><div class="col-lg-6 social-media"><ul class="list-inline text-lg-right mt-3 mt-lg-0"><li class=list-inline-item><a target=_blank href=https://twitter.com/exeal><img src=/assets/img/social/twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.linkedin.com/company/exeal/><img src=/assets/img/social/linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.youtube.com/channel/UCxVspi-mashFr1RPGxSxEPA><img src=/assets/img/social/youtube.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/exeal-es><img src=/assets/img/social/github.svg></a></li><li class=list-inline-item><a target=_blank href=mailto:hola@exeal.com><img src=/assets/img/social/email.svg></a></li></ul></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script>
<script src=/assets/js/scroll.js></script>
<script src=/assets/js/redirect.js></script>
<script src=/assets/js/console.js></script>
<script>function loadScript(t){var n=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://tracker.metricool.com/resources/be.js",e.onreadystatechange=t,e.onload=t,n.appendChild(e)}loadScript(function(){beTracker.t({hash:"45d30dfb71957d625ad900e4772a2d6a"})})</script><div class="modal fade" id=newsletter-modal tabindex=-1 role=dialog aria-hidden=true><div class="modal-dialog modal-lg modal-dialog-centered" role=document><div class=modal-content><div class=box style=margin:1.5rem;padding:3rem><div class="flap flap-top-right"></div><h2>¿Quieres descubrir las <em>10+1 claves que harán crecer tu carrera como desarrollador</em> en 2024?</h2><p>Déjanos tu nombre y tu mejor email y lo <em>recibirás directamente en tu bandeja de entrada</em>, junto a mucho más <em>contenido de valor</em>.</p><div id=mc_embed_shell><link href=//cdn-images.mailchimp.com/embedcode/classic-061523.css rel=stylesheet type=text/css><div id=mc_embed_signup><form action="https://exeal.us10.list-manage.com/subscribe/post?u=b43f7982f87d38bbb55bc64ae&id=a85eab802a&f_id=008ed9e5f0" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank><div id=mc_embed_signup_scroll><div class=indicates-required><span class=asterisk>*</span> campos requeridos</div><div class=mc-field-group><label for=mce-EMAIL>Tu mejor email <span class=asterisk>*</span></label><input type=email name=EMAIL class="required email" id=mce-EMAIL required></div><div class=mc-field-group><label for=mce-FNAME>Tu nombre <span class=asterisk>*</span></label><input type=text name=FNAME class="required text" id=mce-FNAME required></div><div id=mce-responses class="clear foot"><div class=response id=mce-error-response style=display:none></div><div class=response id=mce-success-response style=display:none></div></div><div aria-hidden=true style=position:absolute;left:-5000px>/* real people should not fill this in and expect good things
- do not remove this or risk form bot signups */
<input type=text name=b_b43f7982f87d38bbb55bc64ae_a85eab802a tabindex=-1></div><div class=optionalParent><div class="clear foot"><input type=submit name=subscribe id=mc-embedded-subscribe class=btn-submit value="Obtener las 10+1 claves"><p style="margin:0 auto"><a href=http://eepurl.com/iDVZqA title="Mailchimp: marketing por correo electrónico fácil y divertido"><span style=display:inline-block;background-color:transparent;border-radius:4px><img class=refferal_badge src=https://digitalasset.intuit.com/render/content/dam/intuit/mc-fe/en_us/images/intuit-mc-rewards-text-dark.svg alt="Intuit Mailchimp" style="width:220px;height:40px;display:flex;padding:2px 0;justify-content:center;align-items:center"></span></a></p></div></div></div></form></div><script type=text/javascript src=//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js></script>
<script type=text/javascript>(function(){window.fnames=new Array,window.ftypes=new Array,fnames[0]="EMAIL",ftypes[0]="email",fnames[1]="FNAME",ftypes[1]="text",fnames[2]="LNAME",ftypes[2]="text",fnames[5]="JOBTITLE",ftypes[5]="text",fnames[6]="COMPANY",ftypes[6]="text",fnames[3]="ADDRESS",ftypes[3]="address",fnames[4]="PHONE",ftypes[4]="phone"})(jQuery);var $mcj=jQuery.noConflict(!0)</script></div></div></div></div></div><script>if(typeof Storage!="undefined"){function showPopup(){window.setTimeout(function(){$("#newsletter-modal").modal("show"),sessionStorage.setItem("popup","hide")},1e4)}sessionStorage.getItem("popup")||sessionStorage.setItem("popup","show"),sessionStorage.getItem("popup")=="show"&&showPopup()}</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f2bf2edad69c454"></script></body></html>
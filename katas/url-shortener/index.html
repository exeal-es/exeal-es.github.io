<!doctype html><html lang=es><head><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TQGN65PV")</script><meta charset=utf-8><title>URL Shortener Kata | Exeal</title>
<meta name=description content="Kata práctica para aprender arquitectura hexagonal creando un acortador de URLs. Usa TDD, puertos y adaptadores paso a paso."><meta name=author content="Exeal"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:url" content="https://www.exeal.com/katas/url-shortener/"><meta property="og:site_name" content="Exeal"><meta property="og:title" content="URL Shortener Kata"><meta property="og:description" content="Kata práctica para aprender arquitectura hexagonal creando un acortador de URLs. Usa TDD, puertos y adaptadores paso a paso."><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="katas"><meta property="article:published_time" content="2025-05-13T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-13T00:00:00+00:00"><meta property="og:image" content="https://www.exeal.com/images/blog/posts/panel-hexagonal.jpg"><meta itemprop=name content="URL Shortener Kata"><meta itemprop=description content="Kata práctica para aprender arquitectura hexagonal creando un acortador de URLs. Usa TDD, puertos y adaptadores paso a paso."><meta itemprop=datePublished content="2025-05-13T00:00:00+00:00"><meta itemprop=dateModified content="2025-05-13T00:00:00+00:00"><meta itemprop=wordCount content="532"><meta itemprop=image content="https://www.exeal.com/images/blog/posts/panel-hexagonal.jpg"><meta itemprop=keywords content="Arquitectura,Mocks,Outside-In,Experienced"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.exeal.com/images/blog/posts/panel-hexagonal.jpg"><meta name=twitter:title content="URL Shortener Kata"><meta name=twitter:description content="Kata práctica para aprender arquitectura hexagonal creando un acortador de URLs. Usa TDD, puertos y adaptadores paso a paso."><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous><link rel=stylesheet href=https://www.exeal.com/scss/main.css><link rel=stylesheet href=https://www.exeal.com/scss/hero.css><link rel=icon type=image/png href=/assets/img/favicon.png><link rel=apple-touch-icon href=/assets/img/apple-touch-icon.png><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/8231847.js></script><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css><meta name=facebook-domain-verification content="xwbugjbpmp2jwy1y6mzdhe6ga267uz"><script>!function(e,t,n,s,o,i,a){if(e.fbq)return;o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],i=t.createElement(n),i.async=!0,i.src=s,a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(i,a)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","417415780749470"),fbq("track","PageView")</script><noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=417415780749470&ev=PageView&noscript=1"></noscript><script>(function(e,t,n,s,o,i){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:5031744,hjsv:6},o=t.getElementsByTagName("head")[0],i=t.createElement("script"),i.async=1,i.src=n+e._hjSettings.hjid+s+e._hjSettings.hjsv,o.appendChild(i)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=")</script><link rel=stylesheet href=https://www.exeal.com/scss/blog.css><link rel=stylesheet href=https://www.exeal.com/scss/hero.css></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TQGN65PV" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><nav class="navbar navbar-light navbar-expand-lg navbar-shrink"><div class=container><div class="d-flex flex-row"><a href=/ class=navbar-brand><img src=/assets/img/logo-exeal-header-black.svg alt=Exeal>
</a><a href=/katas/ class=navbar-brand><img src=/images/katas/logo-katas.svg alt=Katas></a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarTogglerDemo01 aria-controls=navbarTogglerDemo01 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarTogglerDemo01><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link nav-button" href=/>Cursos</a></li></ul></div></div></nav><header class="hero hero-bg-img" style=background-image:url(/images/blog/posts/panel-hexagonal.jpg)><div class="hero-bg-img-mask bg-mask"><div class="container h-100"><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-light"></ul><h1><span class=underline>URL Shortener Kata</span></h1><p><a data-scroll=sect-body href=#><img class=arrow-down src=/assets/img/arrow-down-secondary.svg></a></p></div></div></div></div></header><section id=sect-body><div class=container><article><h2 id=problema-de-negocio>Problema de negocio</h2><p>Tu equipo ha sido encargado de desarrollar la primera versión de un sistema de acortado de URLs llamado <strong>HexaShort</strong>, que permita a los usuarios:</p><h3 id=1-casos-de-uso-principales>1. Casos de uso principales:</h3><p><strong>Crear un short URL</strong></p><ul><li>A partir de una URL larga, el sistema debe generar un slug único y devolver la URL acortada.</li><li>Opcionalmente, el usuario puede proponer un slug personalizado.</li><li>El sistema debe rechazar slugs que ya estén en uso.</li></ul><p><strong>Resolver un short URL</strong></p><ul><li>Cuando se accede a un slug, el sistema debe redirigir al usuario a la URL destino correspondiente.</li><li>Debe registrar un evento de click con un fingerprint, calculado a partir de la IP y el user agent del usuario.</li></ul><p><strong>Obtener estadísticas de un short URL</strong></p><ul><li>Permite consultar el número total de clicks y visitantes únicos asociados a un slug.</li></ul><p><strong>Listar todos los short URLs creados</strong></p><ul><li>Devuelve una lista paginada de los short URLs existentes.</li></ul><hr><h2 id=2-interfaces-disponibles>2. Interfaces disponibles</h2><p>Se te proporciona un conjunto de <strong>interfaces predefinidas</strong> que representan los puertos de la arquitectura hexagonal. Ya están separados en primarios y secundarios.</p><h3 id=puertos-primarios-exponen-los-casos-de-uso>Puertos primarios (exponen los casos de uso):</h3><ul><li><code>IShortUrlManager</code> → para gestionar la creación, stats y listado.</li><li><code>IShortUrlResolver</code> → para resolver el slug y registrar clics.</li></ul><h3 id=puertos-secundarios-servicios-e-infraestructura>Puertos secundarios (servicios e infraestructura):</h3><ul><li><code>IShortUrlRepository</code></li><li><code>ISlugGenerator</code></li><li><code>IClickTracker</code></li><li><code>IClickStatisticsProvider</code></li><li><code>IClock</code></li><li><code>IUrlConfiguration</code></li></ul><h2 id=3-solución-propuesta>3. Solución propuesta</h2><p>Debes implementar la lógica de negocio usando <strong>arquitectura hexagonal (puertos y adaptadores)</strong>, con una aproximación <strong>Outside-In TDD</strong> siguiendo este flujo:</p><h3 id=fase-1-identificación-de-puertos>Fase 1: Identificación de puertos</h3><ul><li>Define los puertos primarios y secundarios (ya dados).</li><li>Identifica los <em>use cases</em> principales y decide qué interfaz los modela.</li></ul><h3 id=fase-2-tests-de-aceptación-outside-in-tdd>Fase 2: Tests de aceptación (Outside-In TDD)</h3><ul><li>Comienza escribiendo tests de aceptación contra las interfaces de los <strong>puertos primarios</strong> (<code>IShortUrlManager</code>, <code>IShortUrlResolver</code>).</li><li>Define qué comportamientos esperas de cada método y bajo qué condiciones.</li></ul><h3 id=fase-3-introduce-dobles-de-test>Fase 3: Introduce dobles de test</h3><ul><li>Para que tus tests de aceptación pasen, introduce dobles de test (mocks/fakes) para los <strong>puertos secundarios</strong> (e.g., <code>IShortUrlRepository</code>, <code>IClickTracker</code>&mldr;).</li></ul><h3 id=fase-4-implementa-los-adaptadores-driven-secundarios>Fase 4: Implementa los adaptadores driven (secundarios)</h3><ul><li><p>Implementa adaptadores reales para los puertos secundarios, por ejemplo:</p><ul><li>Un repositorio en memoria o con base de datos.</li><li>Un slug generator aleatorio.</li><li>Un click tracker que almacene estadísticas.</li></ul></li><li><p>Usa <strong>tests de contrato</strong> para asegurar que estos adaptadores cumplen las expectativas del dominio.</p></li></ul><h3 id=fase-5-implementa-los-adaptadores-driver-primarios>Fase 5: Implementa los adaptadores driver (primarios)</h3><ul><li>Implementa los controladores, handlers o endpoints HTTP que llamen a los puertos primarios.</li><li>Utiliza <strong>tests de colaboración</strong> mockeando los puertos primarios para validar que el adaptador orquesta correctamente.</li></ul><h2 id=reglas-adicionales-de-negocio>Reglas adicionales de negocio</h2><ul><li><p>El slug debe ser único. Si el usuario pasa un slug ya existente, debe recibir un error.</p></li><li><p>Si no se pasa un slug personalizado, se genera automáticamente con <code>ISlugGenerator</code>.</p></li><li><p>La URL base del short URL se configura mediante <code>IUrlConfiguration</code>.</p></li><li><p>Las estadísticas deben mostrar:</p><ul><li>Número total de clics.</li><li>Número de visitantes únicos (por fingerprint).</li></ul></li></ul><h2 id=bonus-ideas-para-extender-la-kata>Bonus: Ideas para extender la kata</h2><ul><li>Soportar fechas de expiración para las URLs.</li><li>Añadir tracking por país/navegador.</li><li>Soportar tags o notas para URLs (tipo &ldquo;campaña&rdquo;, &ldquo;fuente&rdquo;).</li><li>Añadir autenticación y gestión de URLs por usuario.</li></ul><h2 id=recursos>Recursos</h2><p>Si te ha gustado esta kata y quieres profundizar en diseño evolutivo, arquitectura hexagonal y cómo tomar mejores decisiones técnicas en sistemas reales, échale un vistazo a la formación:</p><p>👉 <a href="https://www.exeal.com/cursos/master-arquitecto/?utm_source=exeal.com&amp;utm_medium=website&amp;utm_campaign=master_arquitecto_jun25&amp;utm_content=katas">Master Arquitecto – Formación avanzada en diseño y arquitectura de software</a></p></article></div><div class=container><div class="row h-100 align-items-center"><div class="col-12 text-center"><ul class="tags tags-dark"></ul><div class=addthis_inline_share_toolbox></div></div></div></div></section><footer class=black><div class=container><div class="row align-items-center"><div class="col-lg-6 text-lg-left"><a href=/><img src=/assets/img/logo-exeal-footer.svg alt=Exeal></a><p><a href=/jobs/extreme-programming-coach/>Empleo</a> |
<a href=/legal/legal-notice/>Aviso legal</a> |
<a href=/legal/cookie-policy/>Política de cookies</a> |
<a href=/legal/privacy-policy/>Política de privacidad</a></p></div><div class="col-lg-6 social-media"><ul class="list-inline text-lg-right mt-3 mt-lg-0"><li class=list-inline-item><a target=_blank href=https://x.com/exeal><img src=/assets/img/social/twitter.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.linkedin.com/company/exeal/><img src=/assets/img/social/linkedin.svg></a></li><li class=list-inline-item><a target=_blank href=https://www.youtube.com/channel/UCxVspi-mashFr1RPGxSxEPA><img src=/assets/img/social/youtube.svg></a></li><li class=list-inline-item><a target=_blank href=https://github.com/exeal-es><img src=/assets/img/social/github.svg></a></li><li class=list-inline-item><a target=_blank href=mailto:hola@exeal.com><img src=/assets/img/social/email.svg></a></li></ul></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script><script src=/assets/js/scroll.js></script><script src=/assets/js/redirect.js></script><script src=/assets/js/console.js></script><script src=/assets/js/carousel-scroll.js></script><script>function loadScript(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://tracker.metricool.com/resources/be.js",t.onreadystatechange=e,t.onload=e,n.appendChild(t)}loadScript(function(){beTracker.t({hash:"45d30dfb71957d625ad900e4772a2d6a"})})</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f2bf2edad69c454"></script></body></html>